
repositories {
    maven {
        credentials {
            username System.getProperty("USERNAME")
            password System.getProperty("PASSWORD")
        }
        url System.getProperty("REPOSITORY")
    }
}

configurations {
  fetchWithoutClassifier
  fetchWithClassifier
  fetchPom
}

dependencies {
  fetchWithoutClassifier System.getProperty("GROUP") + 
    ":" + System.getProperty("ID") + 
    ":" + System.getProperty("VERSION") + 
    "@" + System.getProperty("EXTENSION")

  fetchWithClassifier System.getProperty("GROUP") + 
    ":" + System.getProperty("ID") + 
    ":" + System.getProperty("VERSION") + 
    ":" + System.getProperty("EXTENSION") +
    "@" + System.getProperty("EXTENSION")

  fetchPom System.getProperty("GROUP") + 
    ":" + System.getProperty("ID") + 
    ":" + System.getProperty("VERSION") + 
    "@" + "pom"
}

task fetchIt << {
  configurations.each {
    config ->
    try {
      config.resolve().each {
        file ->
        println "FETCHED " + config.name + " " + file.getPath()
      }
    } catch (Exception e) {
      println "ERROR " + config.name + " " + e.getMessage()
    }
  }
}
